---
const year = new Date().getFullYear();
---

<footer class="bg-[#305048] text-white py-12">
    <div class="container mx-auto px-6">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
                <img 
                    src="/images/palma-logo.png?v=20260125" 
                    alt="Palma Cleaning Logo" 
                    class="h-10 w-auto mb-4"
                    loading="lazy">
                <p class="mt-4 text-white/70 text-sm">Premium residential & commercial cleaning services throughout Ocala, Marion County, and The Villages.</p>
                <div class="mt-4 flex space-x-4">
                    <a href="https://www.facebook.com/palmacleaningco" class="text-white hover:text-[#FF8057] transition" aria-label="Facebook"><i class="fa-brands fa-facebook text-xl"></i></a>
                    <a href="https://www.instagram.com/palmacleaningco" class="text-white hover:text-[#FF8057] transition" aria-label="Instagram"><i class="fa-brands fa-instagram text-xl"></i></a>
                    <a href="tel:3527644747" class="text-white hover:text-[#FF8057] transition" aria-label="Call Palma Cleaning"><i class="fa-solid fa-phone text-xl"></i></a>
                </div>
            </div>
            <div>
                <h4 class="font-bold text-lg mb-4">Services</h4>
                <ul class="space-y-2 text-white/70 text-sm">
                    <li><a href="/standard-cleaning" class="hover:text-[#FF8057] transition">Standard Cleaning</a></li>
                    <li><a href="/deep-cleaning" class="hover:text-[#FF8057] transition">Deep Cleaning</a></li>
                    <li><a href="/move-in-out-cleaning" class="hover:text-[#FF8057] transition">Move-In / Move-Out</a></li>
                    <li><a href="/post-construction-cleaning" class="hover:text-[#FF8057] transition">Post-Construction</a></li>
                    <li><a href="/commercial-cleaning" class="hover:text-[#FF8057] transition">Commercial / Office</a></li>
                    <li><a href="/services" class="hover:text-[#FF8057] transition">All Services</a></li>
                </ul>
            </div>
            <div>
                <h4 class="font-bold text-lg mb-4">Service Areas</h4>
                <ul class="space-y-2 text-white/70 text-sm">
                    <li><a href="/ocala" class="hover:text-[#FF8057] transition">Ocala & Marion County</a></li>
                    <li><a href="/the-villages" class="hover:text-[#FF8057] transition">The Villages</a></li>
                    <li><a href="/dunnellon" class="hover:text-[#FF8057] transition">Dunnellon & Rainbow Springs</a></li>
                    <li><a href="/wec-area" class="hover:text-[#FF8057] transition">World Equestrian Center</a></li>
                    <li><a href="/service-areas" class="hover:text-[#FF8057] transition">View All Locations</a></li>
                </ul>
            </div>
            <div>
                <h4 class="font-bold text-lg mb-4">Contact</h4>
                <ul class="space-y-2 text-white/70 text-sm">
                    <li><i class="fa-solid fa-phone mr-2"></i>(352) 764-4747</li>
                    <li><i class="fa-solid fa-envelope mr-2"></i>hello@palmacleaningco.com</li>
                    <li><i class="fa-solid fa-location-dot mr-2"></i>Ocala, FL</li>
                    <li><i class="fa-solid fa-clock mr-2"></i>Mon - Fri â€¢ 8:00 AM - 6:00 PM</li>
                </ul>
            </div>
        </div>
        <div class="mt-12 pt-8 border-t border-white/20 text-center text-white/60 text-sm">
            <p>&copy; {year} Palma Cleaning LLC. All rights reserved.</p>
        </div>
    </div>
</footer>

<!-- Request a Quote modal (opens only on click) -->
<div id="quote-modal" class="fixed inset-0 z-[1000] hidden p-4" aria-hidden="true">
    <button
        type="button"
        class="absolute inset-0 bg-black/60 backdrop-blur-sm"
        aria-label="Close Request a Quote"
        data-quote-modal-close
    ></button>

    <div class="relative mx-auto w-full max-w-4xl h-[min(90vh,820px)] bg-white rounded-2xl shadow-2xl overflow-hidden border border-black/10 flex flex-col">
        <div class="h-14 px-4 sm:px-6 flex items-center justify-between border-b border-black/10 bg-white shrink-0">
            <div class="font-semibold text-[#305048]">Request a Quote</div>
            <button
                type="button"
                class="w-10 h-10 inline-flex items-center justify-center rounded-lg hover:bg-black/5 transition"
                aria-label="Close"
                data-quote-modal-close
            >
                <i class="fa-solid fa-xmark text-[#305048]"></i>
            </button>
        </div>

        <iframe
            id="quote-modal-iframe"
            title="Request a Quote"
            class="w-full flex-1 border-0"
            loading="lazy"
        ></iframe>

        <div class="h-14 px-4 sm:px-6 flex items-center justify-end gap-3 border-t border-black/10 bg-white shrink-0">
            <button
                type="button"
                class="px-5 py-2.5 rounded-lg border border-[#305048]/30 text-[#305048] font-semibold hover:bg-black/5 transition"
                data-quote-modal-close
            >
                Close
            </button>
        </div>
    </div>
</div>

<script is:inline>
    (function () {
        const FORM_URL = 'https://link.palmacleaningco.com/widget/form/UlPHV9CBTZU2NsWsquep';
        const MODAL_ID = 'quote-modal';
        const IFRAME_ID = 'quote-modal-iframe';

        const getEls = () => {
            return {
                modal: document.getElementById(MODAL_ID),
                iframe: document.getElementById(IFRAME_ID),
            };
        };

        const openModal = () => {
            const { modal, iframe } = getEls();
            if (!modal || !iframe) return;

            if (!iframe.getAttribute('src')) {
                iframe.setAttribute('src', FORM_URL);
            }

            modal.classList.remove('hidden');
            modal.classList.add('flex', 'items-center', 'justify-center');
            modal.setAttribute('aria-hidden', 'false');
            document.documentElement.style.overflow = 'hidden';
        };

        const closeModal = () => {
            const { modal } = getEls();
            if (!modal) return;
            modal.classList.add('hidden');
            modal.classList.remove('flex', 'items-center', 'justify-center');
            modal.setAttribute('aria-hidden', 'true');
            document.documentElement.style.overflow = '';
        };

        document.addEventListener('click', (e) => {
            const trigger = e.target.closest('[data-request-quote]');
            if (trigger) {
                e.preventDefault();
                openModal();
                return;
            }

            if (e.target.closest('[data-quote-modal-close]')) {
                e.preventDefault();
                closeModal();
            }
        });

        document.addEventListener('keydown', (e) => {
            if (e.key !== 'Escape') return;
            const { modal } = getEls();
            if (!modal || modal.classList.contains('hidden')) return;
            closeModal();
        });
    })();
</script>